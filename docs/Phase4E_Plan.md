# Phase 4-E ê³„íš: Kaggle Real Sample ê¸°ë°˜ ê³ í’ˆì§ˆ ë§¤ì¹­

**ì‘ì„±ì¼:** 2025-10-15
**ëª©ì :** Kaggle US Accidents ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ ê³ í’ˆì§ˆ ë§¤ì¹­ ë° ëª¨ë¸ ìµœì í™”

---

## ğŸ“‹ ê°œìš”

### Phase 4-Eì˜ í•µì‹¬ ì°¨ë³„ì 

| í•­ëª© | Phase 4-D | Phase 4-E |
|------|-----------|-----------|
| **ë°ì´í„° ì†ŒìŠ¤** | ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° | Kaggle Real Sample |
| **ë§¤ì¹­ ê±°ë¦¬** | â‰¤200km | **â‰¤50km** â­ |
| **ë§¤ì¹­ ì‹œê°„** | Â±7ì¼ | **Â±3ì¼** â­ |
| **ë„ì‹œ ë§¤ì¹­** | ì„ í˜¸ | **í•„ìˆ˜** â­ |
| **ì˜ˆìƒ ë¼ë²¨ ì •í™•ë„** | 70~80% | **85~90%** â­ |
| **Combined Data** | 20,000ê°œ | 20,000ê°œ |
| **ëª¨ë¸** | LR + Class Weight | **LR, RF, GBM Ensemble** â­ |

---

## ğŸ¯ ëª©í‘œ

### 1. ë°ì´í„° í’ˆì§ˆ í–¥ìƒ

```
Phase 4-D ë§¤ì¹­ ì¡°ê±´:
  ê±°ë¦¬: â‰¤200km
  ì‹œê°„: Â±7ì¼
  ë„ì‹œ: ì„ í˜¸

â†“ ê°œì„ 

Phase 4-E ë§¤ì¹­ ì¡°ê±´:
  ê±°ë¦¬: â‰¤50km     (4ë°° ì—„ê²©)
  ì‹œê°„: Â±3ì¼      (2.3ë°° ì—„ê²©)
  ë„ì‹œ: í•„ìˆ˜      (100% ì¼ì¹˜)
```

**ê¸°ëŒ€ íš¨ê³¼:**
- ë§¤ì¹­ë¥  ê°ì†Œ (36% â†’ ì˜ˆìƒ 15~20%)
- ë¼ë²¨ ì •í™•ë„ í–¥ìƒ (70~80% â†’ 85~90%)
- False Positive ê°ì†Œ

---

### 2. ëª¨ë¸ ì„±ëŠ¥ í–¥ìƒ

**Phase 4-E ëª©í‘œ:**
- F1 Score: 0.60 ì´ìƒ (Phase 4-D: 0.546)
- Recall: 0.70 ì´ìƒ (Phase 4-D: 0.606)
- Precision: 0.65 ì´ìƒ (Phase 4-D: 0.497)

**ì£¼ìš” ê°œì„ :**
- âœ… Voting Ensemble (LR, RF, GBM)
- âœ… ì£¼ê°„/ì•¼ê°„ êµ¬ë¶„ Weight ê³„ì‚°
- âœ… Scenario A vs B ë¹„êµ

---

## ğŸ“Š ë°ì´í„° íŒŒì´í”„ë¼ì¸

### ì „ì²´ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: Kaggle US Accidents Real Sample               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ ì‹¤ì œ Kaggle ë°ì´í„°ì…‹ í™œìš©                            â”‚
â”‚  â€¢ 500,000ê°œ ìƒ˜í”Œ ìƒì„±                                  â”‚
â”‚  â€¢ ë„ì‹œ, ë‚ ì”¨, ì‹¬ê°ë„, ì‹œê°„ ë“± ì‹¤ì œ ë¶„í¬               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: Vehicle Sensors ìƒì„±                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ 50,000ê°œ ì„¼ì„œ ë°ì´í„°                                 â”‚
â”‚  â€¢ ìš´ì „ì ìœ í˜•: SAFE, MODERATE, AGGRESSIVE             â”‚
â”‚  â€¢ ì´ë²¤íŠ¸: ê¸‰ê°€ì†, ê¸‰ì •ê±°, ê¸‰íšŒì „, ê³¼ì†                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: ê³ í’ˆì§ˆ ë§¤ì¹­ (Phase 4-E)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì¡°ê±´:                                                  â”‚
â”‚    â€¢ ê±°ë¦¬: â‰¤50km (ì—„ê²©)                                â”‚
â”‚    â€¢ ì‹œê°„: Â±3ì¼ (ì—„ê²©)                                 â”‚
â”‚    â€¢ ë„ì‹œ: í•„ìˆ˜ ì¼ì¹˜                                    â”‚
â”‚                                                         â”‚
â”‚  ì˜ˆìƒ ê²°ê³¼:                                             â”‚
â”‚    â€¢ ë§¤ì¹­ ì„±ê³µ: 8,000~10,000ê°œ (16~20%)                â”‚
â”‚    â€¢ ë§¤ì¹­ ì‹¤íŒ¨: 40,000~42,000ê°œ (80~84%)               â”‚
â”‚    â€¢ ë¼ë²¨ ì •í™•ë„: 85~90%                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: Combined ë°ì´í„°ì…‹ ìƒì„±                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ ì‚¬ê³  O: 10,000ê°œ (ë§¤ì¹­ëœ ì„¼ì„œ)                       â”‚
â”‚  â€¢ ì‚¬ê³  X: 10,000ê°œ (ë¹„ë§¤ì¹­ ì„¼ì„œ)                       â”‚
â”‚  â€¢ ì´ 20,000ê°œ (50% ê· í˜•)                               â”‚
â”‚                                                         â”‚
â”‚  Train/Test ë¶„í• :                                       â”‚
â”‚    â€¢ Train: 15,000ê°œ (75%)                              â”‚
â”‚    â€¢ Test:   5,000ê°œ (25%)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: ëª¨ë¸ í•™ìŠµ ë° í‰ê°€                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Logistic Regression + Class Weight                 â”‚
â”‚  2. Random Forest                                       â”‚
â”‚  3. Gradient Boosting Machine                           â”‚
â”‚  4. Voting Ensemble (LR + RF + GBM)                     â”‚
â”‚                                                         â”‚
â”‚  í‰ê°€:                                                  â”‚
â”‚    â€¢ Scenario A vs B ë¹„êµ                               â”‚
â”‚    â€¢ ì£¼ê°„/ì•¼ê°„ êµ¬ë¶„ Weight                              â”‚
â”‚    â€¢ Threshold ìµœì í™”                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¬ ì‹¤í—˜ ì„¤ê³„

### ì‹¤í—˜ 1: ê³ í’ˆì§ˆ ë§¤ì¹­ ë°ì´í„° ìƒì„±

**ëª©ì :** ë¼ë²¨ ì •í™•ë„ 85~90% ë‹¬ì„±

**ë°©ë²•:**
```python
def perform_high_quality_matching(accidents, sensors):
    """ê³ í’ˆì§ˆ ë§¤ì¹­ (Phase 4-E)"""
    for accident in accidents:
        for sensor in sensors:
            # ì¡°ê±´ 1: ë™ì¼ ë„ì‹œ (í•„ìˆ˜)
            if accident['City'] != sensor['City']:
                continue

            # ì¡°ê±´ 2: ê±°ë¦¬ 50km ì´ë‚´
            distance = calculate_distance_km(
                accident['Lat'], accident['Lon'],
                sensor['Lat'], sensor['Lon']
            )
            if distance > 50:  # Phase 4-D: 200km
                continue

            # ì¡°ê±´ 3: ì‹œê°„ì°¨ Â±3ì¼
            time_diff = abs(accident['Time'] - sensor['Time'])
            if time_diff > 259200:  # 3ì¼ = 72ì‹œê°„ = 259200ì´ˆ
                continue

            # ë§¤ì¹­ ì„±ê³µ!
            matched.append({...})
```

**ì˜ˆìƒ ê²°ê³¼:**
- ë§¤ì¹­ë¥ : 16~20% (Phase 4-D: 36%)
- ë§¤ì¹­ ê°œìˆ˜: 8,000~10,000ê°œ
- ë¼ë²¨ ì •í™•ë„: 85~90% (Phase 4-D: 70~80%)

---

### ì‹¤í—˜ 2: Logistic Regression + Class Weight

**ëª©ì :** ê¸°ë³¸ ëª¨ë¸ ì„±ëŠ¥ ì¸¡ì •

**ì„¤ì •:**
```python
model = LogisticRegressionWithClassWeight(
    learning_rate=0.01,
    iterations=500,
    class_weight='balanced'
)

# Scenario A: 4ê°œ ì´ë²¤íŠ¸
features_a = ['rapid_accel', 'sudden_stop', 'sharp_turn', 'over_speed']

# Scenario B: 3ê°œ ì´ë²¤íŠ¸
features_b = ['rapid_accel', 'sudden_stop', 'sharp_turn']
```

**í‰ê°€ ì§€í‘œ:**
- Accuracy, Precision, Recall, F1 Score, AUC
- Confusion Matrix (TP, FP, TN, FN)

---

### ì‹¤í—˜ 3: Voting Ensemble

**ëª©ì :** ë‹¤ì¤‘ ëª¨ë¸ ì•™ìƒë¸”ë¡œ ì„±ëŠ¥ í–¥ìƒ

**êµ¬ì„±:**
```python
# ëª¨ë¸ 1: Logistic Regression
lr_model = LogisticRegressionWithClassWeight(...)

# ëª¨ë¸ 2: Random Forest
rf_model = RandomForestClassifier(
    n_trees=100,
    max_depth=10,
    min_samples_split=10
)

# ëª¨ë¸ 3: Gradient Boosting Machine
gbm_model = GradientBoostingClassifier(
    n_estimators=100,
    learning_rate=0.1,
    max_depth=5
)

# Voting Ensemble
ensemble = VotingEnsemble(
    models=[lr_model, rf_model, gbm_model],
    voting='soft'  # í™•ë¥  ê¸°ë°˜ íˆ¬í‘œ
)
```

**ê¸°ëŒ€ íš¨ê³¼:**
- F1 Score í–¥ìƒ (ë‹¨ì¼ ëª¨ë¸ ëŒ€ë¹„ +5~10%)
- Recall í–¥ìƒ (ë” ë§ì€ ì‚¬ê³  ê°ì§€)
- ì•ˆì •ì ì¸ ì˜ˆì¸¡

---

### ì‹¤í—˜ 4: ì£¼ê°„/ì•¼ê°„ êµ¬ë¶„ Weight

**ëª©ì :** ì‹œê°„ëŒ€ë³„ ì´ë²¤íŠ¸ ì¤‘ìš”ë„ ë¶„ì„

**ë°©ë²•:**
```python
# ì£¼ê°„ ë°ì´í„°
day_data = [d for d in data if d['is_night'] == 0]
model_day = train_model(day_data)

# ì•¼ê°„ ë°ì´í„°
night_data = [d for d in data if d['is_night'] == 1]
model_night = train_model(night_data)

# Weight ë¹„êµ
print("ì£¼ê°„ Weight:", model_day.weights)
print("ì•¼ê°„ Weight:", model_night.weights)
```

**ë¶„ì„:**
- ê¸‰ê°€ì†, ê¸‰ì •ê±°, ê¸‰íšŒì „, ê³¼ì†ì˜ ì£¼ê°„/ì•¼ê°„ ì°¨ì´
- ì•¼ê°„ì— ë” ìœ„í—˜í•œ ì´ë²¤íŠ¸ ì‹ë³„
- ê°ì  ì‹œìŠ¤í…œì— ë°˜ì˜

---

### ì‹¤í—˜ 5: Scenario A vs B ë¹„êµ

**ëª©ì :** ìµœì  Feature ì¡°í•© ì„ íƒ

**Scenario A:**
```python
features = ['rapid_accel', 'sudden_stop', 'sharp_turn', 'over_speed']
```

**Scenario B:**
```python
features = ['rapid_accel', 'sudden_stop', 'sharp_turn']
```

**ë¹„êµ ê¸°ì¤€:**
- F1 Score
- Recall (ì‚¬ê³  ê°ì§€ìœ¨)
- Precision (ì •í™•ë„)
- êµ¬í˜„ ë³µì¡ë„ (GPS í•„ìš” ì—¬ë¶€)

---

## ğŸ“ˆ ì„±ëŠ¥ ëª©í‘œ

### Phase 4-E ëª©í‘œ ì§€í‘œ

| ì§€í‘œ | Phase 4-D | Phase 4-E ëª©í‘œ | ê°œì„ ìœ¨ |
|------|-----------|----------------|--------|
| **F1 Score** | 0.546 | **â‰¥0.60** | +10% |
| **Recall** | 0.606 | **â‰¥0.70** | +15% |
| **Precision** | 0.497 | **â‰¥0.65** | +31% |
| **AUC** | 0.494 | **â‰¥0.65** | +32% |

### ëª¨ë¸ë³„ ì˜ˆìƒ ì„±ëŠ¥

| ëª¨ë¸ | F1 Score | Recall | Precision |
|------|----------|--------|-----------|
| LR + Class Weight | 0.58 | 0.68 | 0.60 |
| Random Forest | 0.62 | 0.70 | 0.65 |
| GBM | 0.63 | 0.71 | 0.66 |
| **Voting Ensemble** | **0.65** | **0.73** | **0.68** |

---

## ğŸ“‚ ì¶œë ¥ íŒŒì¼

### 1. ë°ì´í„° íŒŒì¼

```
research/
â”œâ”€â”€ phase4e_high_quality_matching.py          # ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ phase4e_matching_results.json             # ë§¤ì¹­ ê²°ê³¼
â”œâ”€â”€ phase4e_combined_data.json                # Combined ë°ì´í„°ì…‹
â””â”€â”€ phase4e_data_samples.json                 # ìƒ˜í”Œ ë°ì´í„°
```

### 2. ê²°ê³¼ íŒŒì¼

```
research/
â”œâ”€â”€ phase4e_lr_results.json                   # LR ê²°ê³¼
â”œâ”€â”€ phase4e_ensemble_results.json             # Ensemble ê²°ê³¼
â”œâ”€â”€ phase4e_day_night_weights.json            # ì£¼ê°„/ì•¼ê°„ Weight
â””â”€â”€ phase4e_scenario_comparison.json          # Scenario ë¹„êµ
```

### 3. ë¬¸ì„œ

```
docs/
â”œâ”€â”€ Phase4E_Plan.md                           # ê³„íš (ì´ ë¬¸ì„œ)
â”œâ”€â”€ Phase4E_Data_Sample_Report.md             # ë°ì´í„° ìƒ˜í”Œ ë¦¬í¬íŠ¸
â”œâ”€â”€ Phase4E_Model_Results.md                  # ëª¨ë¸ ê²°ê³¼ ë¶„ì„
â””â”€â”€ Phase4E_Final_Report.md                   # ìµœì¢… ë¦¬í¬íŠ¸
```

---

## ğŸ” ì˜ˆìƒ ê²°ê³¼ ë¶„ì„

### 1. ë§¤ì¹­ í’ˆì§ˆ í–¥ìƒ

**Phase 4-D vs Phase 4-E:**

```
Phase 4-D:
  ë§¤ì¹­ ì¡°ê±´: ê±°ë¦¬ â‰¤200km, ì‹œê°„ Â±7ì¼
  ë§¤ì¹­ë¥ : 36% (18,000 / 50,000)
  ë¼ë²¨ ì •í™•ë„: 70~80%

  ì˜ˆì‹œ: ì‚¬ê³ ì™€ 200km ë–¨ì–´ì§„ ì„¼ì„œë„ ë§¤ì¹­
  â†’ False Positive ê°€ëŠ¥ì„± ë†’ìŒ

Phase 4-E:
  ë§¤ì¹­ ì¡°ê±´: ê±°ë¦¬ â‰¤50km, ì‹œê°„ Â±3ì¼, ë™ì¼ ë„ì‹œ í•„ìˆ˜
  ë§¤ì¹­ë¥ : 16~20% (8,000~10,000 / 50,000)
  ë¼ë²¨ ì •í™•ë„: 85~90%

  ì˜ˆì‹œ: ì‚¬ê³ ì™€ 50km ì´ë‚´, 3ì¼ ì´ë‚´ë§Œ ë§¤ì¹­
  â†’ ë†’ì€ í™•ì‹ ë„ì˜ ë¼ë²¨
```

---

### 2. ëª¨ë¸ ì„±ëŠ¥ í–¥ìƒ

**ê³ í’ˆì§ˆ ë°ì´í„°ì˜ íš¨ê³¼:**

```
Phase 4-D (ë‚®ì€ í’ˆì§ˆ):
  F1 Score: 0.546
  Recall:   0.606

  ë¬¸ì œ: ë…¸ì´ì¦ˆ ë§ì€ ë¼ë²¨ â†’ ëª¨ë¸ í˜¼ë€

Phase 4-E (ë†’ì€ í’ˆì§ˆ):
  F1 Score: 0.60+ (ì˜ˆìƒ)
  Recall:   0.70+ (ì˜ˆìƒ)

  ê°œì„ : ê¹¨ë—í•œ ë¼ë²¨ â†’ ëª…í™•í•œ í•™ìŠµ
```

---

### 3. Ensemble íš¨ê³¼

**ë‹¨ì¼ ëª¨ë¸ vs Ensemble:**

```
ë‹¨ì¼ ëª¨ë¸ (LR):
  F1 Score: 0.58
  ë¬¸ì œ: ì„ í˜• ëª¨ë¸ì˜ í•œê³„

Ensemble (LR + RF + GBM):
  F1 Score: 0.65 (ì˜ˆìƒ)
  ì¥ì : ê° ëª¨ë¸ì˜ ê°•ì  ê²°í•©
```

---

### 4. ì£¼ê°„/ì•¼ê°„ Weight ì°¨ì´

**ì˜ˆìƒ íŒ¨í„´:**

```
ì£¼ê°„ (is_night=0):
  ê¸‰ê°€ì† Weight: -0.02
  ê¸‰ì •ê±° Weight:  0.05  â­ ì¤‘ìš”
  ê¸‰íšŒì „ Weight:  0.03
  ê³¼ì† Weight:   -0.01

ì•¼ê°„ (is_night=1):
  ê¸‰ê°€ì† Weight: -0.03
  ê¸‰ì •ê±° Weight:  0.08  â­â­ ë§¤ìš° ì¤‘ìš”
  ê¸‰íšŒì „ Weight:  0.06  â­ ì¤‘ìš”
  ê³¼ì† Weight:    0.02

í•´ì„:
  ì•¼ê°„ì— ê¸‰ì •ê±°ì™€ ê¸‰íšŒì „ì´ ë” ìœ„í—˜
  â†’ ê°ì  ì‹œìŠ¤í…œì—ì„œ ì•¼ê°„ ê°€ì¤‘ì¹˜ ì¦ê°€
```

---

## ğŸ’¡ ê°ì  ì‹œìŠ¤í…œ ì ìš©

### Phase 4-E ê²°ê³¼ ê¸°ë°˜ ê°ì 

**ì£¼ê°„ ê°ì :**
```python
day_penalty = {
    'rapid_accel': 1,   # ê¸°ë³¸
    'sudden_stop': 3,   # ë†’ìŒ (Weight ê¸°ë°˜)
    'sharp_turn': 2,    # ì¤‘ê°„
    'over_speed': 1     # ê¸°ë³¸
}
```

**ì•¼ê°„ ê°ì  (1.5~2ë°°):**
```python
night_penalty = {
    'rapid_accel': 2,   # 1.5ë°°
    'sudden_stop': 5,   # 1.7ë°°
    'sharp_turn': 4,    # 2ë°°
    'over_speed': 2     # 2ë°°
}
```

**ìµœì¢… ì ìˆ˜ ê³„ì‚°:**
```python
def calculate_driving_score(events, is_night):
    penalty = night_penalty if is_night else day_penalty

    total_penalty = (
        events['rapid_accel'] * penalty['rapid_accel'] +
        events['sudden_stop'] * penalty['sudden_stop'] +
        events['sharp_turn'] * penalty['sharp_turn'] +
        events['over_speed'] * penalty['over_speed']
    )

    base_score = 100
    final_score = max(0, base_score - total_penalty)

    return final_score
```

---

## ğŸ¯ ì„±ê³µ ê¸°ì¤€

### Phase 4-E ì„±ê³µ ì§€í‘œ

âœ… **ë°ì´í„° í’ˆì§ˆ:**
- ë§¤ì¹­ ë¼ë²¨ ì •í™•ë„ â‰¥85%
- Combined ë°ì´í„° 20,000ê°œ ìƒì„±

âœ… **ëª¨ë¸ ì„±ëŠ¥:**
- F1 Score â‰¥0.60 (Phase 4-D: 0.546)
- Recall â‰¥0.70 (Phase 4-D: 0.606)
- Precision â‰¥0.65 (Phase 4-D: 0.497)

âœ… **Ensemble íš¨ê³¼:**
- Ensembleì´ ë‹¨ì¼ ëª¨ë¸ë³´ë‹¤ ìš°ìˆ˜
- F1 Score +5% ì´ìƒ ê°œì„ 

âœ… **ì‹¤ìš©ì„±:**
- Scenario Bê°€ Scenario Aë³´ë‹¤ ìš°ìˆ˜
- ì£¼ê°„/ì•¼ê°„ Weight ì°¨ì´ ëª…í™•
- ê°ì  ì‹œìŠ¤í…œì— ì ìš© ê°€ëŠ¥

---

## ğŸ“… ì‹¤í–‰ ê³„íš

### Week 1: ë°ì´í„° ì¤€ë¹„ (Day 1-2)

- [x] Phase 4-E ê³„íš ë¬¸ì„œ ì‘ì„±
- [ ] Kaggle Real Sample ê¸°ë°˜ ë°ì´í„° ìƒì„± (500K)
- [ ] ê³ í’ˆì§ˆ ë§¤ì¹­ ìˆ˜í–‰ (50km, Â±3ì¼)
- [ ] Combined ë°ì´í„°ì…‹ 20K ìƒì„±

### Week 2: ëª¨ë¸ í•™ìŠµ (Day 3-4)

- [ ] LR + Class Weight í•™ìŠµ
- [ ] Random Forest êµ¬í˜„ ë° í•™ìŠµ
- [ ] GBM êµ¬í˜„ ë° í•™ìŠµ
- [ ] Voting Ensemble êµ¬í˜„

### Week 3: ë¶„ì„ ë° ìµœì í™” (Day 5-6)

- [ ] Scenario A vs B ë¹„êµ
- [ ] ì£¼ê°„/ì•¼ê°„ Weight ë¶„ì„
- [ ] Threshold ìµœì í™”
- [ ] Data Sample Report ì‘ì„±

### Week 4: ë¬¸ì„œí™” (Day 7)

- [ ] ëª¨ë¸ ê²°ê³¼ ë¶„ì„ ë¬¸ì„œ
- [ ] ìµœì¢… ë¦¬í¬íŠ¸ ì‘ì„±
- [ ] ê°ì  ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ ì‹¤í–‰

1. **ë°ì´í„° ìƒì„± ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±**
   ```bash
   python research/phase4e_high_quality_matching.py
   ```

2. **ìƒ˜í”Œ í™•ì¸**
   ```bash
   python research/phase4e_data_samples.py
   ```

3. **ëª¨ë¸ í•™ìŠµ**
   ```bash
   python research/phase4e_model_training.py
   ```

### í–¥í›„ ê³„íš

- Phase 4-E ê²°ê³¼ ê¸°ë°˜ ê°ì  ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
- ì‹¤ì œ ì„œë¹„ìŠ¤ ì ìš© ì¤€ë¹„
- A/B í…ŒìŠ¤íŠ¸ ì„¤ê³„

---

## ğŸ“Š ì˜ˆìƒ íƒ€ì„ë¼ì¸

| ì¼ì • | ì‘ì—… | ì˜ˆìƒ ì†Œìš” ì‹œê°„ |
|------|------|---------------|
| Day 1 | ê³„íš ìˆ˜ë¦½ + ë°ì´í„° ìƒì„± | 2-3ì‹œê°„ |
| Day 2 | ìƒ˜í”Œ ë¶„ì„ + ë¦¬í¬íŠ¸ ì‘ì„± | 2-3ì‹œê°„ |
| Day 3 | LR, RF, GBM ëª¨ë¸ êµ¬í˜„ | 3-4ì‹œê°„ |
| Day 4 | Ensemble + í‰ê°€ | 2-3ì‹œê°„ |
| Day 5 | Scenario ë¹„êµ + Weight ë¶„ì„ | 2-3ì‹œê°„ |
| Day 6 | ìµœì í™” + ë¬¸ì„œí™” | 2-3ì‹œê°„ |
| Day 7 | ìµœì¢… ë¦¬í¬íŠ¸ + ê²€í†  | 2-3ì‹œê°„ |
| **ì´ê³„** | | **15-22ì‹œê°„** |

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 4-E ì™„ë£Œ ì¡°ê±´

- [ ] ê³ í’ˆì§ˆ ë§¤ì¹­ ë°ì´í„° 20K ìƒì„± (ë¼ë²¨ ì •í™•ë„ â‰¥85%)
- [ ] LR + Class Weight ëª¨ë¸ í•™ìŠµ ì™„ë£Œ
- [ ] RF, GBM ëª¨ë¸ êµ¬í˜„ ë° í•™ìŠµ ì™„ë£Œ
- [ ] Voting Ensemble êµ¬í˜„ ë° í‰ê°€ ì™„ë£Œ
- [ ] Scenario A vs B ë¹„êµ ë¶„ì„ ì™„ë£Œ
- [ ] ì£¼ê°„/ì•¼ê°„ Weight ë¶„ì„ ì™„ë£Œ
- [ ] Data Sample Report ì‘ì„± ì™„ë£Œ
- [ ] Model Results ë¬¸ì„œ ì‘ì„± ì™„ë£Œ
- [ ] Final Report ì‘ì„± ì™„ë£Œ
- [ ] F1 Score â‰¥0.60 ë‹¬ì„±
- [ ] Recall â‰¥0.70 ë‹¬ì„±
- [ ] Precision â‰¥0.65 ë‹¬ì„±

---

**ì‘ì„±ì¼:** 2025-10-15
**ìƒíƒœ:** âœ… ê³„íš ìˆ˜ë¦½ ì™„ë£Œ
**ë‹¤ìŒ ë‹¨ê³„:** ê³ í’ˆì§ˆ ë§¤ì¹­ ë°ì´í„° ìƒì„±
